service: nsg-acl

frameworkVersion: ">=1.1.0 <2.0.0"

provider:
  name: aws
  region: us-west-2
  stage: ${opt:stage, 'nonprod'}
  runtime: nodejs10.x
  vpc:
    securityGroupIds:
      - sg-0d2e53ade40e60060
    subnetIds:
      - subnet-0126fe03fa91a38de
      - subnet-0386f8ab22bd7a664

package:
  individually: true

functions:
  list:
    handler: src/list.handler
    events:
      - http:
          method: GET
          path: api/{table}
          cors: true

  create:
    handler: src/create.handler
    events:
      - http:
          method: PUT
          path: api/{table}
          cors: true
  update:
    handler: src/update.handler
    events:
      - http:
          method: PUT
          path: api/{table}/{id}
          cors: true
  delete:
    handler: src/delete.handler
    events:
      - http:
          method: DELETE
          path: api/{table}/{id}
          cors: true


custom:
  TeamManagedPolicy: !ImportValue fff000-iam-${self:provider.stage}-nsgtoolbox-01-TeamManagedPolicy
  webpack:
    webpackConfig: webpack.config.js
    includeModules: false

plugins:
  - serverless-webpack
